<!DOCTYPE html>
<html>
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="manifest" href="/circuit/manifest.json">
  
    <!-- 登录验证脚本 -->
    <script>
      // 检查用户是否已登录
      if (sessionStorage.getItem('authenticated') !== 'true') {
        // 记录当前页面URL，以便登录后返回
        sessionStorage.setItem('redirect_after_login', window.location.href);
        // 未登录，重定向到登录页
        window.location.href = 'login.html';
      }
    </script>
  
    <!-- Properties can be specified to influence deferred binding -->
    <meta name='gwt:property' content='locale=en_UK'>
    
    
    <!-- Titles are optional, but useful -->
    <title></title>

<style>
.disabled {
	color: lightgray
}
.topSpace {
	margin-top: 12px;
}
.cursorPointer {
   cursor: default;
}
.cursorCross {
   cursor: crosshair;
}

.cursorSplitter {
   cursor: row-resize;
}

/* 去掉Canvas的焦点边框 */
canvas, canvas:focus, canvas:active {
   outline: none !important;
   -webkit-tap-highlight-color: rgba(0,0,0,0);
   -webkit-focus-ring-color: rgba(0,0,0,0);
   border: none !important;
   box-shadow: none !important;
}

.gwt-MenuItem-disabled {
	color: lightgray;
  /* color: rgb(11, 133, 219); */

}
.offScreen {
	position: absolute;
	right: 101%;
	overflow: hidden;
}
.gwt-Frame{
	overflow: hidden;
	border: 0px !important;
}

.gwt-MenuItem {
	font-size: 14px !important;
}

.gwt-MenuBar-horizontal {
	font-size: 14px !important;
	}
	
.gwt-Label-selected {
	font-size: 1.3em;
	font-weight: 700;
	border-top: 1px solid black;
	border-bottom: 1px solid black;
}
.gwt-Label-1off {
	color: DarkGray;
}

.gwt-Label-2off {
	font-size:0.8em;
	color: LightGray;
}

.gwt-Label-current {
}

.gwt-Button.chbut {
	padding:3px;
	margin: 3px;
}

.gwt-Button.chbut.chsel {
	font-weight: bold;
}

.gwt-Button.chbut-black {
	background: black;
	color: white;
}

.gwt-Button.chbut-white {
	background: white;
	color: black;
}

.gwt-TextBox.scalebox {
	width: 100px;
}

.gwt-Button.expand-but {
	line-height: 0;
	font-size: 13px;
	margin-right: 5px;
	border-radius:0px;
	display: inline-block;
	text-align: center;
	width: 15px;
	height: 15px;
	padding-left: 0;
	padding-right: 0;
	padding-bottom:1px;
	padding-top:0;
	margin-bottom:1px;
	background:gray;
	color:white;
}


.topButton-red {
    margin-top: 5px;
    margin-bottom: 5px;
    margin-left:5px;
    padding: 5px 7px;
    text-decoration: none;
    color: #ffffff;
    cursor: pointer;
    cursor: hand;
    font-size: small;
    background-color: #ff0000; 
    border: 1px solid #bbb;
    border-bottom: 1px solid #a0a0a0;
    border-radius: 3px;
    -moz-border-radius: 3px;
}

.topButton {
    margin-top: 5px;
    margin-bottom: 5px;
    margin-left: auto;
    margin-right: auto;
    padding: 5px 7px;
    text-decoration: none;
    cursor: pointer;
    cursor: hand;
    font-size: small;
    background-color: #e7e7e7; 
    border: 1px solid #bbb;
    border-bottom: 1px solid #a0a0a0;
    border-radius: 3px;
    -moz-border-radius: 3px;
    display: block;
    text-align: center;
}

.radioPanel label {
	margin-right: 15px;
}

</style>

<link rel="stylesheet" href="font/fontello.css">

</head>
  <body>
  <!-- 添加个人中心按钮和下拉菜单 -->
  <div style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
          <div class="dropdown">
        <button id="userCenterBtn" class="dropbtn" style="background-color: #5e35b1; color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-size: 15px; display: flex; align-items: center; gap: 10px;">
          <img src="/img/svg/user-avatar.svg" alt="用户" style="width: 20px; height: 20px; filter: brightness(0) invert(1);">
          <span>个人中心</span>
        </button>
      <div id="userDropdown" class="dropdown-content">
        <a href="userProfile.html">我的资料</a>
        <a href="myCircuits.html">我的项目</a>
        <a href="logout.html">退出登录</a>
      </div>
    </div>
  </div>

  <style>
    /* 下拉菜单样式 */
    .dropdown {
      position: relative;
      display: inline-block;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      right: 0;
      margin-top: 8px;
      background-color: rgba(255, 255, 255, 0.8); /* 半透明背景 */
      backdrop-filter: blur(8px); /* 磨砂效果 */
      -webkit-backdrop-filter: blur(8px); /* Safari 兼容 */
      width: 100%; /* 与按钮宽度一致 */
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
      z-index: 1;
      border-radius: 16px; /* 大圆角 */
      overflow: hidden; /* 确保内容不溢出圆角 */
      border: 1px solid rgba(255, 255, 255, 0.2); /* 细微边框增强立体感 */
    }

    .dropdown-content a {
      color: #333;
      padding: 12px 16px;
      text-decoration: none;
      display: block;
      text-align: center; /* 水平居中 */
      transition: all 0.2s ease; /* 平滑过渡效果 */
      font-size: 15px; /* 加大字号 */
      font-weight: 500; /* 适度加粗 */
    }

    .dropdown-content a:hover {
      background-color: rgba(94, 53, 177, 0.1); /* 与按钮颜色协调的hover效果 */
    }

    .show {
      display: block;
    }
  </style>

  <script>
    // 个人中心菜单功能
    document.addEventListener('DOMContentLoaded', function() {
      // 点击按钮切换下拉菜单的显示状态
      document.getElementById('userCenterBtn').addEventListener('click', function(e) {
        e.preventDefault(); // 阻止默认行为
        document.getElementById('userDropdown').classList.toggle('show');
      });

      // 点击页面其他地方时关闭下拉菜单
      window.addEventListener('click', function(e) {
        // 检查点击的元素是否是按钮本身或其子元素
        const userCenterBtn = document.getElementById('userCenterBtn');
        if (userCenterBtn.contains(e.target)) {
          return; // 如果点击的是按钮或其子元素，不做任何操作
        }
        
        // 否则，隐藏下拉菜单
        var dropdown = document.getElementById('userDropdown');
        if (dropdown.classList.contains('show')) {
          dropdown.classList.remove('show');
        }
      });
    });
  </script>
  
  <!-- Include the next line to allow support for dropbox import/export. You will need your own app key. -->
  <!--<script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="YOUR_KEY"></script>-->

  <script language="javascript" src="lz-string.min.js"></script>
   
    <!-- This script tag is what actually loads the GWT module.  The -->
    <!-- 'nocache.js' file (also called a "selection script") is     -->
    <!-- produced by the GWT compiler in the module output directory -->
    <!-- or generated automatically in development mode.             -->
    <script language="javascript" src="circuitjs1/circuitjs1.nocache.js"></script>
    
    <!-- Include a history iframe to enable full GWT history support -->
    <!-- (the id must be exactly as shown)                           -->
    <iframe src="javascript:''" id="__gwt_historyFrame" style="width:0;height:0;border:0"></iframe>
    
    <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
	navigator.serviceWorker.register('service-worker.js').then(registration => {
	  console.log('Service Worker registered with scope:', registration.scope);
	}).catch(error => {
	  console.error('Service Worker registration failed:', error);
	});
      });
    }
    </script>

  </body>
 </html>
